{
  "openapi": "3.1.0",
  "info": {
    "title": "UPC Price Intelligence API",
    "description": "API for intelligent pricing recommendations based on UPC codes, combining market data from eBay with internal sales metrics.",
    "version": "1.0.0"
  },
  "paths": {
    "/": {
      "get": {
        "summary": "Root",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": ["Health"],
        "summary": "Health Check",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/price-recommendation": {
      "post": {
        "tags": ["Pricing"],
        "summary": "Get Price Recommendation",
        "description": "Get pricing recommendation for a UPC by combining market data from eBay with optional internal sales data.",
        "operationId": "get_price_recommendation_price_recommendation_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PriceRecommendationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PriceRecommendationResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "version": {
            "type": "string",
            "title": "Version",
            "default": "1.0.0"
          }
        },
        "type": "object",
        "required": ["status"],
        "title": "HealthResponse"
      },
      "InternalData": {
        "properties": {
          "internal_price": {
            "type": "number",
            "exclusiveMinimum": 0,
            "title": "Internal Price",
            "description": "Internal price in dollars"
          },
          "sell_through_rate": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Sell Through Rate",
            "description": "Sell-through rate (0-1)"
          },
          "days_on_shelf": {
            "type": "integer",
            "minimum": 0,
            "title": "Days On Shelf",
            "description": "Days product has been on shelf"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Product category"
          }
        },
        "type": "object",
        "required": ["internal_price", "sell_through_rate", "days_on_shelf", "category"],
        "title": "InternalData"
      },
      "MarketData": {
        "properties": {
          "median_price": {
            "anyOf": [{"type": "number"}, {"type": "null"}],
            "title": "Median Price",
            "description": "Median price from market"
          },
          "average_price": {
            "anyOf": [{"type": "number"}, {"type": "null"}],
            "title": "Average Price",
            "description": "Average price from market"
          },
          "sample_size": {
            "type": "integer",
            "title": "Sample Size",
            "description": "Number of listings analyzed",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "title": "MarketData"
      },
      "PriceRecommendationRequest": {
        "properties": {
          "upc": {
            "type": "string",
            "title": "UPC",
            "description": "UPC code (8 or 12 digits)"
          },
          "internal_data": {
            "anyOf": [{"$ref": "#/components/schemas/InternalData"}, {"type": "null"}],
            "description": "Optional internal sales data"
          }
        },
        "type": "object",
        "required": ["upc"],
        "title": "PriceRecommendationRequest"
      },
      "PriceRecommendationResponse": {
        "properties": {
          "upc": {
            "type": "string",
            "title": "UPC"
          },
          "recommended_price": {
            "type": "number",
            "title": "Recommended Price",
            "description": "Recommended price in dollars"
          },
          "internal_vs_market_weighting": {
            "type": "number",
            "maximum": 1,
            "minimum": 0,
            "title": "Internal Vs Market Weighting",
            "description": "Weight given to internal data (0=all market, 1=all internal)"
          },
          "confidence_score": {
            "type": "integer",
            "maximum": 100,
            "minimum": 0,
            "title": "Confidence Score",
            "description": "Confidence score (0-100)"
          },
          "rationale": {
            "type": "string",
            "title": "Rationale",
            "description": "Explanation of the recommendation"
          },
          "market_data": {
            "anyOf": [{"$ref": "#/components/schemas/MarketData"}, {"type": "null"}]
          },
          "internal_data": {
            "anyOf": [{"$ref": "#/components/schemas/InternalData"}, {"type": "null"}]
          },
          "warnings": {
            "items": {"type": "string"},
            "type": "array",
            "title": "Warnings",
            "default": []
          }
        },
        "type": "object",
        "required": ["upc", "recommended_price", "internal_vs_market_weighting", "confidence_score", "rationale"],
        "title": "PriceRecommendationResponse"
      }
    }
  }
}
